<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freehand | Skills for the Real World</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

    <nav>
        <div class="brand-name"><strong>Freehand</strong></div>
        <ul>
            <li><a href="#resources">Library</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="https://www.buymeacoffee.com/Gabriellakwok" target="_blank" class="btn-donate">Buy Me A Coffee â˜•</a></li>
        </ul>
    </nav>

    <header class="hero">
        <div class="hero-content">
            <h1>Skills for the actual world.</h1>
            <p>Resources by Gabriella & Priscilla. Updated automatically.</p>
            <a href="#resources" class="btn-main">View Library</a>
        </div>
    </header>

    <section id="resources" class="container">
        <h2 class="section-title">Resource Library</h2>
        <div id="file-list" class="grid">
            <p>Scanning for new files...</p>
        </div>
    </section>

    <section id="about" class="bg-light">
        <div class="container">
            <h2>About Freehand</h2>
            <div class="roles-grid">
                <div class="role-box">
                    <h4>Gabriella</h4>
                    <p>Tech Lead: Systems and scaling.</p>
                </div>
                <div class="role-box">
                    <h4>Priscilla</h4>
                    <p>Creative Lead: Design and UX.</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <p>Â© 2026 Freehand | Hong Kong</p>
        <a href="admin.html" class="admin-link">Admin Dashboard</a>
    </footer>

    <script>
        async function loadFiles() {
            const username = "Gabriellakwok";
            const repo = "institution-2";
            const grid = document.getElementById('file-list');
            
            try {
                // This fetches your files directly from GitHub's brain
                const response = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/`);
                const files = await response.json();
                grid.innerHTML = ''; 

                files.forEach(file => {
                    // It ONLY shows your uploads, ignoring the code files
                    const isResource = file.name.endsWith('.pdf') || file.name.endsWith('.zip') || file.name.endsWith('.mp4');
                    
                    if (isResource) {
                        const card = document.createElement('div');
                        card.className = 'card';
                        const icon = file.name.endsWith('.mp4') ? 'ðŸŽ¬' : 'ðŸ“„';
                        
                        // It turns the filename (like My_Video.mp4) into a clean Title (My Video)
                        const cleanTitle = file.name.split('.')[0].replace(/_/g, ' ').replace(/-/g, ' ');

                        card.innerHTML = `
                            <div class="card-icon">${icon}</div>
                            <h3>${cleanTitle}</h3>
                            <p>${file.name.endsWith('.mp4') ? 'Video' : 'Document'}</p>
                            <a href="${file.download_url}" target="_blank" class="btn-text">Download / View â†’</a>
                        `;
                        grid.appendChild(card);
                    }
                });

                if (grid.innerHTML === '') {
                    grid.innerHTML = '<p>No resources found. Upload a .pdf or .mp4 to see it here!</p>';
                }
            } catch (error) {
                grid.innerHTML = '<p>Connection error. Refresh the page.</p>';
            }
        }
        loadFiles();
    </script>
</body>
</html>
